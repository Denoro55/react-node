(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t){},117:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),o=a.n(c),s=a(2),i=a(10),l=a(4),m=a(13),u=a(16),d=a(17),f=a(18),p=a(20),v=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return r.a.createElement("div",null,"cart")}}]),a}(r.a.Component),E=function(e){return{type:"USER_DATA_UPDATE",payload:e}},h=function(e,t){return function(){return function(a){return a({type:"GET_USER"}),e.getUserData().then((function(e){var n=e.body.data,r=Object(l.a)({auth:!0,token:t},n);return a({type:"GET_USER_SUCCESS",payload:r})})).catch((function(e){a({type:"GET_USER_FAILURE"})}))}}},g=(a(84),a(69)),_=a.n(g)()("http://localhost:".concat("5000")),b=Object(s.b)((function(e){return{isAuthenticated:e.user.auth,user:e.user}}),(function(e){return{actionUnauthorize:function(){return e((localStorage.removeItem("userData"),{type:"USER_UNAUTHORIZE"}))}}}))((function(e){var t=e.isAuthenticated,a=e.actionUnauthorize,n=e.user,c=function(e){e.preventDefault(),_.emit("leaveRoom",{id:n.id}),a()};return r.a.createElement("header",{className:"header"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement(i.b,{className:"navbar-brand left",to:"/"},"Art's Store"),r.a.createElement("ul",{id:"nav-mobile",className:"left hide-on-med-and-down"},[{exact:!0,to:"/",name:"Home",isAuth:!1},{exact:!0,to:"/me",name:"Me",isAuth:!0},{exact:!0,to:"/followers",name:"Followers",isAuth:!0},{exact:!0,to:"/following",name:"Following",isAuth:!0},{exact:!1,to:"/messages/",name:"Messages",isAuth:!0},{exact:!0,to:"/search",name:"Search",isAuth:!0}].map((function(e,a){return!t&&e.isAuth||t&&!e.isAuth?null:r.a.createElement("li",{key:a,className:"nav-item"},r.a.createElement(i.c,{activeClassName:"active",className:"nav-link",exact:e.exact,to:e.to},e.name))}))),t?r.a.createElement("ul",{className:"navbar-nav ml-3 right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{onClick:c,activeClassName:"active",className:"nav-link ml-auto",to:"/logout"},"Logout"))):r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{activeClassName:"active",className:"nav-link ml-auto",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{activeClassName:"active",className:"nav-link ml-2",to:"/register"},"Sign up")))))))))})),N=Object(s.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,a=t.auth?r.a.createElement("p",null,"Hello, ",r.a.createElement("b",null,t.name)):r.a.createElement("p",null,"Hello, Guest!");return r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"mb-3"},"Home page"),a)})),C=Object(s.b)()((function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Store page"))})),O=a(30),y=Object(s.b)((function(e){return{auth:e.user.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(O.a)(e,["component","auth"]);return r.a.createElement(p.b,null,a?r.a.createElement(t,n):r.a.createElement(p.a,{to:"/login"}))})),S=a(15),j=r.a.createContext(),w=j.Provider,k=j.Consumer,T=function(e){return function(t){return r.a.createElement(k,null,(function(a){return r.a.createElement(e,Object.assign({},t,{apiService:a}))}))}},U=function(e){return function(t){var a=Object(s.c)((function(e){return e.user})),n=t.computedMatch.params.id;return n&&a.id.toString()===n.toString()?r.a.createElement(p.a,{to:"/me"}):r.a.createElement(e,t)}},A=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={form:{email:"",password:""},message:{color:"red",text:""}},e.login=function(t){t.preventDefault();var a=e.props,n=a.apiService,r=a.actionAuthorize,c=a.actionGetUserData;n.login(e.state.form).then((function(t){var a=t.body;if(a.errors)e.setState({message:{color:"red",text:a.message}});else{var n=a.token;n&&(r({auth:!0,token:n}),c(n).then((function(t){_.emit("connected",{id:t.payload.id}),e.props.history.push("/me")})))}})).catch((function(e){}))},e.onInputChange=function(t){e.setState({form:Object(l.a)({},e.state.form,Object(S.a)({},t.target.name,t.target.value))})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.message,t=e.text?r.a.createElement("div",{className:"form-feedback"},e.text):null;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"signup"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s4 offset-s4 center"},r.a.createElement("form",{className:"form",onSubmit:this.login},r.a.createElement("div",{className:"form__title"},"Login"),r.a.createElement("div",{className:"form__body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",onChange:this.onInputChange,name:"email",className:"form-control",placeholder:"Email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",onChange:this.onInputChange,name:"password",className:"form-control",placeholder:"Password"}))),t,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign in"))))))}}]),a}(r.a.Component),I=T(Object(s.b)((function(e){return{token:e.user.token}}),(function(e,t){var a=t.apiService;t.token;return{actionGetUserData:function(t){return e(h(a,t)())},actionAuthorize:function(t){return e(function(e){var t=e.auth,a=e.token;return localStorage.setItem("userData",a),{type:"USER_AUTHORIZE",payload:{auth:t,token:a}}}(t))}}}))(A)),P=a(26),x=a.n(P),R=(a(117),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={form:{name:"",email:"",password:""},message:{ok:!1,text:""}},e.register=function(t){t.preventDefault(),e.props.apiService.register(e.state.form).then((function(t){var a=t.body;a.errors?e.setState({message:{ok:!1,text:a.message}}):e.setState({message:{ok:!0,text:a.message},form:{name:"",email:"",password:""}})})).catch((function(e){}))},e.onInputChange=function(t){e.setState({form:Object(l.a)({},e.state.form,Object(S.a)({},t.target.name,t.target.value))})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.message,t=x()({"form-feedback":!0,good:this.state.message.ok}),a=e.text?r.a.createElement("div",{className:t},e.text):null;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"signup"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s4 offset-s4 center"},r.a.createElement("form",{className:"form",onSubmit:this.register},r.a.createElement("div",{className:"form__title"},"Sign up"),r.a.createElement("div",{className:"form__body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",onChange:this.onInputChange,name:"name",className:"form-control",placeholder:"Name",value:this.state.form.name})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",onChange:this.onInputChange,name:"email",className:"form-control",placeholder:"Email",value:this.state.form.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",onChange:this.onInputChange,name:"password",className:"form-control",placeholder:"Password",value:this.state.form.password}))),a,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign up"))))))}}]),a}(r.a.Component)),D=T(Object(s.b)((function(e){return{}}),(function(e){return{checkAuth:function(){}}}))(R)),F=a(8),M=r.a.createContext(),L=Object(p.g)((function(e){var t=e.messagesList,a=e.openChat,c=Object(n.useContext)(M).publicPath;return r.a.createElement("ul",{className:"collection with-header"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"collection-item"},r.a.createElement("div",{className:"message-item"},r.a.createElement("div",{className:"message-item__content"},r.a.createElement("div",{className:"message-item__avatar"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(c).concat(e.avatarUrl,")")},className:"message-item__avatar-icon"})),r.a.createElement("div",{className:"message-item__info"},r.a.createElement("div",{className:"message-item__name"},r.a.createElement("strong",null,e.name)),r.a.createElement("div",{className:"message-item__text"},e.text))),r.a.createElement("div",{className:"message-item__actions"},e.updated?r.a.createElement("div",{className:"message-item__action"},r.a.createElement("button",{onClick:function(){return a(e.id)},className:"btn btn-outline btn-danger btn-sm"},r.a.createElement("i",{className:"fa fa-envelope-open"}))):null,r.a.createElement("div",{className:"message-item__action"},r.a.createElement("button",{onClick:function(){return a(e.id)},className:"btn btn-outline btn-success btn-sm"},r.a.createElement("i",{className:"fa fa-weixin"}))))))})))})),H=function(){return r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))},q=a(7),G=function(e){return function(t){return function(a){var n;a({type:"FETCH_MESSAGES",payload:n}),e.getListMessages(t).then((function(e){a(function(e){return{type:"FETCH_MESSAGES_SUCCESS",payload:e}}(e.body.messages))})).catch((function(e){a({type:"FETCH_MESSAGES_FAILURE"})}))}}},J=function(e){return{type:"MESSAGE_UPDATE",payload:e}},z=function(e){return{type:"MESSAGES_LIST_UPDATE",payload:e}},K=function(e){return{type:"MESSAGES_LIST_SORT",payload:e.id}},W=function(e){return function(t,a){return function(n){return n({type:"FETCH_CHAT"}),e.getChatMessages(t,a).then((function(e){n({type:"FETCH_CHAT_SUCCESS",payload:e.body}),n(J({id:a,updated:!1,sort:!1}))})).catch((function(e){n({type:"FETCH_CHAT_FAILURE"})}))}}},B=function(e){return{type:"CHAT_STATUS_UPDATE",payload:{inChat:e.inChat,chatId:e.chatId}}},V=function(e){return{type:"CHAT_MESSAGE_ADD",payload:{name:e.name,text:e.text}}},X=function(e){return function(t,a,n,r){return function(c){var o=t.id;return e.sendMessage(o,a.id,n,t,r)}}},Z=T(Object(s.b)((function(e){return{user:e.user}}),(function(e,t){var a=t.apiService;return Object(q.b)({fetchChat:W(a),actionUpdateChatStatus:B,addChatMessage:V,actionSendMessage:X(a)},e)}))((function(e){var t=e.backToMessages,a=e.chatLoading,c=e.user,o=e.companionId,i=e.fetchChat,l=e.actionUpdateChatStatus,m=e.actionSendMessage,u=Object(n.useState)(""),d=Object(F.a)(u,2),f=d[0],p=d[1],v=Object(s.c)((function(e){return e.chat.messages})),E=Object(s.c)((function(e){return e.chat.companion})),h=Object(n.useRef)(null);Object(n.useEffect)((function(){return l({inChat:!0,chatId:o}),i(c.id,o),function(){l({inChat:!1,chatId:null})}}),[]),Object(n.useEffect)((function(){h.current&&(h.current.scrollTop=h.current.scrollHeight)}),[v]);return r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat__back"},r.a.createElement("button",{onClick:t,className:"btn btn-primary"},"Back")),r.a.createElement("div",{className:"chat__block"},r.a.createElement("div",{className:"chat__left"},a?r.a.createElement(H,null):r.a.createElement("div",{ref:h,className:"chat__list"},v.map((function(e,t){return r.a.createElement("div",{key:t,className:"chat__item"},r.a.createElement("strong",null,e.name),": ",e.text)}))),r.a.createElement("div",{className:"chat__control"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={id:o,name:E.name,avatarUrl:E.avatarUrl};!function(e,t){var a={name:c.name,text:e,avatarUrl:c.avatarUrl},n=Date.now();m(t,c,a,n).then((function(e){_.emit("sendMessage",{toId:o,fromId:c.id,companion:t,date:n,message:a})})).catch((function(e){}))}(f,t),p("")},className:"chat-control"},r.a.createElement("div",{className:"chat-control__left"},r.a.createElement("input",{onChange:function(e){return p(e.target.value)},type:"text",className:"form-control",value:f})),r.a.createElement("div",{className:"chat-control__right"},r.a.createElement("button",{className:"btn btn-success"},"Send"))))),r.a.createElement("div",{className:"chat__right"},r.a.createElement("div",{className:"chat__companion"},E.name||!a||r.a.createElement(H,null)))))}))),$=a(71),Q=a.n($),Y=(a(126),T(Object(s.b)((function(e){return{user:e.user,messages:e.messages}}),(function(e,t){var a=t.apiService;return Object(q.b)({actionFetchMessages:G(a),updateMessagesList:z},e)}))(Object(p.g)((function(e){var t=e.user,a=e.actionFetchMessages,c=Q.a.parse(e.location.search),o=!1;c.chat&&(o=!0);var i=Object(n.useState)(o),l=Object(F.a)(i,2),m=l[0],u=l[1],d=Object(s.c)((function(e){return e.chat.loading})),f=Object(s.c)((function(e){return e.messages.loading})),p=Object(s.c)((function(e){return e.messages.messages}));Object(n.useEffect)((function(){a(t.id)}),[]);var v=m?r.a.createElement(Z,{backToMessages:function(){e.history.push("./"),u(!1)},companionId:c.chat,chatLoading:d}):r.a.createElement(L,{openChat:function(t){return u({show:!0,receiverId:a=t}),void e.history.push("?chat=".concat(a));var a},messagesList:p});return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"messages"},f?r.a.createElement(H,null):r.a.createElement("div",{className:"messages__left"},v)))}))))),ee=T(Object(s.b)((function(e){return{}}),(function(e){return Object(q.b)({actionUpdateUserData:E},e)}))((function(e){var t=e.userName,a=e.profileCounters,c=e.isOwner,o=e.avatarUrl,i=e.apiService,l=e.actionUpdateUserData,m=a.postsCount,u=void 0===m?0:m,d=a.imagesCount,f=void 0===d?0:d,p=a.followingCount,v=void 0===p?0:p,E=a.followersCount,h=void 0===E?0:E,g=Object(n.useContext)(M).publicPath,_=Object(n.useRef)(null),b=Object(s.c)((function(e){return e.user})),N=Object(n.useState)(!1),C=Object(F.a)(N,2),O=C[0],y=C[1],S=Object(n.useState)(null),j=Object(F.a)(S,2),w=j[0],k=j[1],T=x()({"avatar-form":!0,active:O}),U=function(){y(!1),_.current.value=null};return r.a.createElement("div",{className:"profile-main"},r.a.createElement("div",{className:"profile-main__background",style:{backgroundImage:"url(https://images2.alphacoders.com/209/thumb-1920-209080.jpg)"}}),r.a.createElement("div",{className:"profile-main__info"},r.a.createElement("div",{className:"profile-info"},r.a.createElement("div",{className:"profile-info__top"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"profile-info__avatar"},r.a.createElement("div",{className:"profile-info__avatar-image",style:{backgroundImage:"url(".concat(g).concat(o,")")}},c?r.a.createElement("div",{className:"profile-info__form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("avatar",_.current.files[0]),t.append("id",b.id),i.uploadAvatar(t).then((function(e){U(),l({avatarUrl:e.body.avatarUrl})})).catch((function(e){}))},className:T},r.a.createElement("label",{className:"avatar-form__label"},"Upload a new photo",r.a.createElement("input",{ref:_,onChange:function(e){var t=e.target.files[0];if(t){y(!0);var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){var e=a.result;k(e)}}else y(!1)},type:"file"})),r.a.createElement("div",{className:"avatar-form__content"},r.a.createElement("div",{className:"avatar-form__preview",style:{backgroundImage:"url(".concat(w,")")}}),r.a.createElement("div",{className:"avatar-form__actions"},r.a.createElement("div",{className:"avatar-form__apply"},r.a.createElement("button",{type:"submit",className:"btn"},"Apply")),r.a.createElement("div",{className:"avatar-form__cancel"},r.a.createElement("div",{onClick:U,className:"btn btn-danger"},"Cancel")))))):null)),r.a.createElement("div",{className:"profile-info__list"},r.a.createElement("div",{className:"profile-info__item"},r.a.createElement("div",{className:"profile-info__value"},h),r.a.createElement("div",{className:"profile-info__key"},"Followers")),r.a.createElement("div",{className:"profile-info__item"},r.a.createElement("div",{className:"profile-info__value"},v),r.a.createElement("div",{className:"profile-info__key"},"Following")),r.a.createElement("div",{className:"profile-info__item"},r.a.createElement("div",{className:"profile-info__value"},f),r.a.createElement("div",{className:"profile-info__key"},"Photos")),r.a.createElement("div",{className:"profile-info__item"},r.a.createElement("div",{className:"profile-info__value"},u),r.a.createElement("div",{className:"profile-info__key"},"Posts"))))),r.a.createElement("div",{className:"profile-info__bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"profile-main__name"},t))))))}))),te=a(9),ae=(a(127),T(Object(s.b)((function(e){return{}}),(function(e){return Object(q.b)({actionUpdateUserData:E},e)}))((function(e){var t=e._cardId,a=e._id,c=e.name,o=e.followersCount,s=e.followingCount,l=e.postsCount,m=e.avatarUrl,u=e.isFollowing,d=e.apiService,f=e.actionUpdateUserData,p=e.updateUser,v=Object(n.useContext)(M).publicPath;return r.a.createElement("div",{className:"user-card"},r.a.createElement("div",{className:"user-card__body"},r.a.createElement("div",{className:"user-card__head"},r.a.createElement("div",{className:"user-card__image",style:{backgroundImage:"url(".concat(v).concat(m,")")}})),r.a.createElement("div",{className:"user-card__name"},c)),r.a.createElement("div",{className:"user-card__actions"},r.a.createElement("div",{onClick:function(){return e=t,void d.follow(a,e,u).then((function(t){if(t.body.ok){var a=t.body,n=a.isFollowing,r=a.client;p(e,{isFollowing:n}),f({followingCount:r.followingCount,followersCount:r.followersCount})}})).catch((function(e){console.log(e)}));var e},className:"user-card__action link-yellow"},u?"Unfollow":"Follow"),r.a.createElement(i.c,{className:"user-card__action link-yellow",to:"/user/".concat(t)},"Page"),r.a.createElement(i.c,{className:"user-card__action link-yellow",to:"/messages/?chat=".concat(t)},"Message")),r.a.createElement("div",{className:"user-card__info"},r.a.createElement("div",{className:"user-card__info-item"},r.a.createElement("div",{className:"user-card__info-key"},l),r.a.createElement("div",{className:"user-card__info-value"},"Posts")),r.a.createElement("div",{className:"user-card__info-item"},r.a.createElement("div",{className:"user-card__info-key"},o),r.a.createElement("div",{className:"user-card__info-value"},"Followers")),r.a.createElement("div",{className:"user-card__info-item"},r.a.createElement("div",{className:"user-card__info-key"},s),r.a.createElement("div",{className:"user-card__info-value"},"Following"))))})))),ne=(a(128),T(Object(s.b)()((function(e){var t=e.fetchFunc,a=Object(s.c)((function(e){return e.user})),c=a.id,o=Object(n.useState)([]),i=Object(F.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(!0),f=Object(F.a)(d,2),p=f[0],v=f[1],E=function(e,t){u((function(a){var n=a.findIndex((function(t){return t._id===e})),r=Object(l.a)({},a[n],{},t);return[].concat(Object(te.a)(a.slice(0,n)),[r],Object(te.a)(a.slice(n+1)))}))};return Object(n.useEffect)((function(){v(!0),t(a.id).then((function(e){u(e.body.users),v(!1)})).catch((function(e){}))}),[t]),r.a.createElement("div",{className:"users"},p?r.a.createElement(H,null):r.a.createElement("div",{className:"users__list"},m.map((function(e){return r.a.createElement("div",{key:e._id,className:"users__item"},r.a.createElement(ae,{name:e.name,followersCount:e.followersCount,followingCount:e.followingCount,postsCount:e.postsCount,avatarUrl:e.avatarUrl,_id:c,_cardId:e._id,isFollowing:e.isFollowing,updateUser:E}))}))))})))),re=T(Object(s.b)()((function(e){var t=e.apiService,a=Object(s.c)((function(e){return e.user})),n=a.followersCount,c=a.followingCount,o=a.imagesCount,i=a.postsCount,l=a.avatarUrl,m=a.name,u=(a.id,{followersCount:n,followingCount:c,imagesCount:o,postsCount:i});return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile__top"},r.a.createElement(ee,{profileCounters:u,avatarUrl:l,userName:m,isOwner:!0})),r.a.createElement("div",{className:"profile__bottom"},r.a.createElement("div",{className:"container"},r.a.createElement(ne,{fetchFunc:t.fetchFollowers.bind(t)}))))}))),ce=T(Object(s.b)()((function(e){var t=e.apiService,a=Object(s.c)((function(e){return e.user})),n=a.followersCount,c=a.followingCount,o=a.imagesCount,i=a.postsCount,l=a.avatarUrl,m=a.name,u={followersCount:n,followingCount:c,imagesCount:o,postsCount:i};return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile__top"},r.a.createElement(ee,{profileCounters:u,avatarUrl:l,userName:m,isOwner:!0})),r.a.createElement("div",{className:"profile__bottom"},r.a.createElement("div",{className:"container"},r.a.createElement(ne,{fetchFunc:t.fetchFollowing.bind(t)}))))}))),oe=function(e){var t=e.apiService,a=e.user,c=e.addPost,o=e.wallId,s=Object(n.useState)(""),i=Object(F.a)(s,2),l=i[0],m=i[1],u=Object(n.useState)(null),d=Object(F.a)(u,2),f=d[0],p=d[1],v=Object(n.useRef)(null),E=Object(n.useRef)(null),h=Object(n.useRef)(null),g=Object(n.useRef)(null),_=x()({btn:!0,"btn-danger":f});return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=v.current.files[0];if(l.length>0||n){var r=new FormData;r.append("text",l),r.append("id",a.id),r.append("wallId",o),r.append("image",n),t.createPost(r).then((function(e){m(""),p(null),h.current.blur(),c(e.body.post)})).catch((function(e){}))}},className:"post-create"},r.a.createElement("input",{onChange:function(e){var t=e.target.files[0];if(t){var a=new FileReader;a.readAsDataURL(t),E.current.blur(),a.onloadend=function(){var e=a.result;p(e)}}else p(null)},ref:v,className:"hidden",type:"file"}),r.a.createElement("div",{className:"post-create__icon"},r.a.createElement("div",{className:"post-icon"},r.a.createElement("i",{className:"fa fa-comments-o","aria-hidden":"true"}))),r.a.createElement("div",{className:"post-create__wrap"},f?r.a.createElement("div",{className:"post-create__image"},r.a.createElement("img",{ref:g,src:f,alt:""})):null,r.a.createElement("div",{className:"post-create__input"},r.a.createElement("textarea",{onChange:function(e){m(e.target.value)},placeholder:"Write a new post...",className:"textarea-theme",value:l,id:"",cols:"30",rows:"10"})),r.a.createElement("div",{className:"post-create__actions"},r.a.createElement("div",{className:"post-create__action"},r.a.createElement("div",{ref:E,onClick:function(e){f?(p(null),E.current.blur()):v.current.click()},className:_},r.a.createElement("i",{className:"fa fa-picture-o","aria-hidden":"true"}))),r.a.createElement("div",{className:"post-create__action"},r.a.createElement("button",{ref:h,type:"submit",className:"btn"},"Post")))))},se=function(e){var t=e.posts,a=e.postsUI,c=e.isOwner,o=void 0!==c&&c,s=e.user,i=e.apiService,l=e.removePostById,m=e.toggleComments,u=e.updatePostLikes,d=e.updatePostComments,f=e.updateCommentLikes,p=Object(n.useContext)(M).publicPath,v=function(e){return r.a.createElement("div",{className:"post-info"},r.a.createElement("div",{className:"post-info__comments"},r.a.createElement("div",{onClick:function(){return m(e._id)},className:"post-comments-button"},r.a.createElement("i",{className:"fa fa-comment-o","aria-hidden":"true"})," ",e.comments.length," Comments")),r.a.createElement("div",{className:"post-info__likes"},r.a.createElement("div",{onClick:function(){return t=e._id,a=e.isLiked,void i.likePost(s.id,t,a).then((function(e){if(e.body.ok){var t=e.body.post;u(t)}})).catch((function(e){}));var t,a},className:"post-likes-button"},e.isLiked?r.a.createElement("i",{style:{color:"red"},className:"fa fa-heart","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-heart-o","aria-hidden":"true"})," ",e.likesCount," Likes")))},E=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.a.createElement("div",{className:"profile-post__image"},r.a.createElement("img",{src:"".concat(p).concat(e.imageUrl),alt:""}),t?v(e):null)},h=function(e,t){return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment__avatar",style:{backgroundImage:"url(".concat(p).concat(e.user.avatarUrl,")")}}),r.a.createElement("div",{className:"comment__content"},r.a.createElement("div",{className:"comment__head"},r.a.createElement("div",{className:"comment__name"},r.a.createElement("strong",null,e.user.name)),r.a.createElement("div",{className:"comment__date"},e.time)),r.a.createElement("div",{className:"comment__body"},r.a.createElement("div",{className:"comment__text"},e.text),r.a.createElement("div",{className:"comment__likes"},r.a.createElement("div",{onClick:function(){return a=e._id,n=e.isLiked,r=t._id,void i.likeComment(s.id,a,n).then((function(e){if(e.body.ok){var t=e.body.comment;f(r,t)}})).catch((function(e){console.log(e.message)}));var a,n,r},className:"comment-like"},e.isLiked?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{style:{color:"red"},className:"fa fa-heart","aria-hidden":"true"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-heart-o","aria-hidden":"true"})),"\xa0",e.likesCount>0?e.likesCount:null)))))},g=function(e,t){var n=null;return n=t?E(e):r.a.createElement(r.a.Fragment,null,e.imageUrl?E(e,!1):null,r.a.createElement("div",{className:"profile-post__body"},r.a.createElement("div",{className:"profile-post__content"},e.text)),r.a.createElement("div",{className:"profile-post__info"},v(e))),r.a.createElement(r.a.Fragment,null,n,a[e._id].commentsOpened?r.a.createElement("div",{className:"profile-post__comments"},r.a.createElement("div",{className:"post-comment"},e.comments.length?r.a.createElement("div",{className:"post-comment__list"},e.comments.map((function(t){return r.a.createElement("div",{key:t._id,className:"post-comment__item"},h(t,e))}))):null,r.a.createElement("div",{className:"post-comment__create"},r.a.createElement("form",{onSubmit:function(t){return function(e,t){e.preventDefault();var a=e.target.elements[0].value;a&&(i.createComment(s.id,t,a).then((function(e){d(t,e.body.comments)})).catch((function(e){})),e.target.reset())}(t,e._id)},className:"comment-create"},r.a.createElement("div",{className:"comment-create__input"},r.a.createElement("textarea",{className:"textarea-theme",cols:"30",rows:"10"})),r.a.createElement("div",{className:"comment-create__actions"},r.a.createElement("div",{className:"comment-create__action"},r.a.createElement("button",{className:"btn"},"Comment"))))))):null)};return r.a.createElement("div",{className:"profile-wall__list"},t.map((function(e){var t=e.imageUrl&&!e.text,a=t?"a photo":"an article";return r.a.createElement("div",{key:e._id,className:"profile-wall__item"},r.a.createElement("div",{className:"profile-post"},r.a.createElement("div",{className:"profile-post__icon"},t?r.a.createElement("div",{className:"post-icon post-icon_green"},r.a.createElement("i",{className:"fa fa-picture-o","aria-hidden":"true"})):r.a.createElement("div",{className:"post-icon post-icon_tomato"},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))),o?r.a.createElement("div",{className:"profile-post__remove"},r.a.createElement("div",{onClick:function(){return t=e._id,void i.removePost(t).then((function(e){l(t)})).catch((function(e){}));var t},className:"post-icon post-icon_remove"},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):null,r.a.createElement("div",{className:"profile-post__head"},r.a.createElement("div",{className:"profile-post__head-left"},r.a.createElement("span",{className:"profile-post__name"},e.user.name)," posted ",a),r.a.createElement("div",{className:"profile-post__head-right"},e.time)),g(e,t)))})))},ie=(a(129),U(T(Object(s.b)((function(e){return{user:e.user}}),(function(e){return Object(q.b)({actionUpdateUserData:E},e)}))((function(e){var t=e.apiService,a=e.actionUpdateUserData,c=e.user,o=e.isUserPage,s=e.userPageId,i=e.profileCounters,m=e.updateProfileCounters,u=e.avatarUrl,d=e.setAvatarUrl,f=!o,p=Object(n.useState)({}),v=Object(F.a)(p,2),E=v[0],h=v[1],g=Object(n.useState)([]),_=Object(F.a)(g,2),b=_[0],N=_[1],C=Object(n.useState)([]),y=Object(F.a)(C,2),j=y[0],w=y[1],k=function(e){return e.reduce((function(e,t){return Object(l.a)({},e,Object(S.a)({},t._id,{commentsOpened:!1}))}),{})};Object(n.useEffect)((function(){o?t.getUserInfo(s,c.id).then((function(e){var t=e.body.data,a=function(e){return{postsCount:e.length,imagesCount:e.filter((function(e){return e.imageUrl})).length}}(t.posts),n=a.postsCount,r=a.imagesCount;d(t.avatarUrl),m({followersCount:t.followersCount,followingCount:t.followingCount,postsCount:n,imagesCount:r}),h({avatarUrl:t.avatarUrl,userName:t.name,userId:t.id,isFollowing:t.isFollowing}),w(k(t.posts)),N(t.posts)})).catch((function(e){})):(h(Object(l.a)({},E,{avatarUrl:c.avatarUrl,userName:c.name,userId:c.id})),t.fetchPosts(c.id).then((function(e){w(k(e.body.posts)),N(e.body.posts)})).catch((function(e){})))}),[]);var T=function(){t.follow(c.id,s,I).then((function(e){var t,n,r=e.body,c=r.isFollowing,o=r.client,s=r.user;t="isFollowing",n=c,h((function(e){return Object(l.a)({},e,Object(S.a)({},t,n))})),m({followingCount:s.followingCount,followersCount:s.followersCount}),a({followingCount:o.followingCount,followersCount:o.followersCount})})).catch((function(e){}))},U=E.userName,A=E.userId,I=E.isFollowing;return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile__top"},r.a.createElement(ee,{profileCounters:i,isOwner:f,userName:U,avatarUrl:u})),r.a.createElement("div",{className:"profile__bottom"},r.a.createElement("div",{className:"container"},f?null:r.a.createElement("div",{className:"profile__actions"},r.a.createElement("div",{className:"profile__follow"},I?r.a.createElement("div",{onClick:T,className:"btn btn-danger"},"Unfollow"):r.a.createElement("div",{onClick:T,className:"btn"},"Follow"))),r.a.createElement("div",{className:"profile__wall"},r.a.createElement("div",{className:"profile__wall-bar"}),r.a.createElement("div",{className:"profile__wall-left"},r.a.createElement("div",{className:"profile-wall"},r.a.createElement("div",{className:"profile-wall__create"},r.a.createElement(oe,{apiService:t,user:e.user,wallId:A,addPost:function(e){var t=Object(l.a)({},j,Object(S.a)({},e._id,{commentsOpened:!1}));w(t),N((function(t){return[e].concat(Object(te.a)(t))}));var a=i.postsCount+1,n=e.imageUrl?i.imagesCount+1:i.imagesCount;m({postsCount:a,imagesCount:n})}})),r.a.createElement(se,{isOwner:f,posts:b,postsUI:j,apiService:t,user:c,removePostById:function(e){var t=b.findIndex((function(t){return t._id===e})),a=b[t],n=i.postsCount-1,r=a.imageUrl?i.imagesCount-1:i.imagesCount;m({postsCount:n,imagesCount:r}),N((function(t){return t.filter((function(t){return t._id!==e}))}))},updatePostLikes:function(e){N((function(t){var a=e._id,n=Object(O.a)(e,["_id"]),r=t.findIndex((function(e){return e._id===a})),c=Object(l.a)({},t[r],{},n);return[].concat(Object(te.a)(t.slice(0,r)),[c],Object(te.a)(t.slice(r+1)))}))},updatePostComments:function(e,t){N((function(a){var n=a.findIndex((function(t){return t._id===e})),r=Object(l.a)({},a[n],{comments:t});return[].concat(Object(te.a)(a.slice(0,n)),[r],Object(te.a)(a.slice(n+1)))}))},toggleComments:function(e){var t=j[e].commentsOpened,a=Object(l.a)({},j,Object(S.a)({},e,{commentsOpened:!t}));w(a)},updateCommentLikes:function(e,t){N((function(a){t._id;var n=Object(O.a)(t,["_id"]),r=a.findIndex((function(t){return t._id===e})),c=a[r],o=c.comments.findIndex((function(e){return e._id===t._id})),s=c.comments[o],i=Object(l.a)({},s,{},n),m=Object(l.a)({},c,{comments:[].concat(Object(te.a)(c.comments.slice(0,o)),[i],Object(te.a)(c.comments.slice(o+1)))});return[].concat(Object(te.a)(a.slice(0,r)),[m],Object(te.a)(a.slice(r+1)))}))}})))))))}))))),le=function(e){var t=e.computedMatch.params.id,a=Object(n.useState)(null),c=Object(F.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)({}),m=Object(F.a)(i,2),u=m[0],d=m[1];return r.a.createElement(ie,Object.assign({setAvatarUrl:s,avatarUrl:o,userPageId:t,profileCounters:u,updateProfileCounters:function(e){d((function(t){return Object(l.a)({},t,{},e)}))},isUserPage:!0},e))},me=Object(s.b)((function(e){return{}}),(function(e){return Object(q.b)({actionUpdateUserData:E},e)}))((function(e){var t=e.actionUpdateUserData,a=Object(s.c)((function(e){return e.user})),n=Object(s.c)((function(e){return e.user.avatarUrl})),c={followersCount:a.followersCount,followingCount:a.followingCount,imagesCount:a.imagesCount,postsCount:a.postsCount};return r.a.createElement(ie,Object.assign({avatarUrl:n,profileCounters:c,updateProfileCounters:function(e){t(e)}},e))})),ue=(a(130),T(Object(s.b)()((function(e){var t=e.apiService,a=Object(s.c)((function(e){return e.user})),c=a.followersCount,o=a.followingCount,i=a.imagesCount,l=a.postsCount,m=a.avatarUrl,u=a.name,d=Object(n.useState)(""),f=Object(F.a)(d,2),p=f[0],v=f[1],E=Object(n.useState)(""),h=Object(F.a)(E,2),g=h[0],_=h[1],b=Object(n.useCallback)((function(){return t.fetchUsers(p)}),[p]),N={followersCount:c,followingCount:o,imagesCount:i,postsCount:l};return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile__top"},r.a.createElement(ee,{profileCounters:N,avatarUrl:m,userName:u,isOwner:!0})),r.a.createElement("div",{className:"profile__bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"search"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v(g)},className:"search__form"},r.a.createElement("div",{className:"search__text"},r.a.createElement("input",{value:g,onChange:function(e){_(e.target.value)},placeholder:"Type a name",type:"text"})),r.a.createElement("div",{className:"search__find"},r.a.createElement("button",{type:"submit",className:"btn"},"Find"))),r.a.createElement("div",{className:"search__result"},r.a.createElement(ne,{fetchFunc:b}))))))})))),de=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.apiService,r=this.props.user.token;e.user.token!==r&&n.setToken(r)}},{key:"getUser",value:function(){return this.props.user}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.apiService,n=t.updateMessageInList,r=t.addChatMessage;fetch("/api/test").then((function(e){console.log(e)})),_.on("getMessage",(function(t){console.log("get data",t);var c=e.getUser(),o=e.props.chat,s=o.inChat,i=o.chatId,m=t.fromId.toString()===c.id.toString(),u=Object(l.a)({},t.message);m&&(u.name=t.companion.name,u.avatarUrl=t.companion.avatarUrl,n({id:t.toId,updated:!1,message:u,sort:!0})),!s||i.toString()!==t.toId.toString()&&i.toString()!==t.fromId.toString()?m||(window.M.toast({html:"<b>".concat(t.message.name,"</b>: ").concat(t.message.text)}),n({id:t.fromId,updated:!0,message:u,sort:!0})):(r(t.message),m||(a.updateChatTime(c.id,t.fromId,t.date),n({id:t.fromId,updated:!1,message:u,sort:!0})))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement("div",{className:"content pt-3"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,component:N}),r.a.createElement(y,{exact:!0,path:"/cart",component:v}),r.a.createElement(p.b,{path:"/store",component:C}),r.a.createElement(y,{exact:!0,path:"/me",component:me}),r.a.createElement(y,{exact:!0,path:"/followers",component:re}),r.a.createElement(y,{exact:!0,path:"/following",component:ce}),r.a.createElement(y,{exact:!0,path:"/messages/",component:Y}),r.a.createElement(y,{exact:!0,path:"/search",component:ue}),r.a.createElement(p.b,{path:"/login",component:I}),r.a.createElement(p.b,{path:"/register",component:D}),r.a.createElement(p.b,{path:"/test",render:function(){return r.a.createElement("h2",null,"Test page")}}),r.a.createElement(y,{path:"/user/:id",component:le}),r.a.createElement(p.a,{to:"/"}))))}}]),a}(r.a.Component),fe=T(Object(s.b)((function(e){return{getNewMessage:e.messages.getNewMessage,user:e.user,chat:e.chat}}),(function(e){return Object(q.b)({updateMessageInList:J,sortMessagesList:K,addChatMessage:V},e)}))(de));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(74),ve=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).status=401,e}return a}(Object(pe.a)(Error)),Ee=function(){function e(){var t=this;Object(m.a)(this,e),this.URL="/api/",this.token=null,this.getUserData=function(){return t.getRequest("userData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t.getToken()}})},this.sendMessage=function(e,a,n,r,c){return t.getRequest("sendMessage",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t.getToken()},body:JSON.stringify({id:e,senderId:a,message:n,companion:r,date:c})})},this.getChatMessages=function(e,a){return t.getRequest("chatMessages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,receiverId:a})})},this.getListMessages=function(e){return t.getRequest("listMessages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})}}return Object(u.a)(e,[{key:"getRequest",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){fetch("".concat(t.URL).concat(e),a).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))})).then((function(e){401===e.status&&r(new ve),n(e)})).catch((function(e){r(e)}))}))}},{key:"login",value:function(e){return this.getRequest("login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"register",value:function(e){return console.log(JSON.stringify(e)),this.getRequest("register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"uploadAvatar",value:function(e){var t=this.getToken();return this.getRequest("uploadAvatar",{method:"POST",headers:{Authorization:t},body:e})}},{key:"fetchPosts",value:function(e){return this.getRequest("posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({id:e})})}},{key:"createPost",value:function(e){return this.getRequest("createPost",{method:"POST",headers:{Authorization:this.getToken()},body:e})}},{key:"removePost",value:function(e){return this.getRequest("posts",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({id:e})})}},{key:"likePost",value:function(e,t,a){var n=this.getToken();return this.getRequest("postLike",{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({userId:e,postId:t,like:a})})}},{key:"createComment",value:function(e,t,a){return this.getRequest("createComment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({userId:e,postId:t,text:a})})}},{key:"likeComment",value:function(e,t,a){return this.getRequest("likeComment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({userId:e,commentId:t,like:a})})}},{key:"updateChatTime",value:function(e,t,a){return this.getRequest("chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,receiverId:t,date:a})})}},{key:"getUserInfo",value:function(e,t){var a=this.getToken();return this.getRequest("userInfo",{method:"POST",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({id:e,clientId:t})})}},{key:"follow",value:function(e,t,a){return console.log(e,t,a),this.getRequest("follow",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({followerId:e,followingId:t,isFollowing:a})})}},{key:"fetchFollowers",value:function(e){return this.getRequest("followers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({userId:e})})}},{key:"fetchFollowing",value:function(e){return this.getRequest("following",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({userId:e})})}},{key:"fetchUsers",value:function(e){return this.getRequest("users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify({match:e})})}},{key:"setToken",value:function(e){this.token=e}},{key:"getToken",value:function(){return this.token}}]),e}(),he=(a(131),{name:null,auth:!1,token:null,id:null,avatarUrl:null,followingCount:0,followersCount:0}),ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_SUCCESS":case"AUTH_CHECK_SUCCESS":case"USER_AUTHORIZE":case"USER_DATA_UPDATE":return Object(l.a)({},e,{},t.payload);case"USER_UNAUTHORIZE":return Object(l.a)({},he);default:return e}},_e={loading:!0,messages:[]},be=function(e,t,a,n,r){return{name:e,text:t,id:a,avatarUrl:n,updated:r}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MESSAGES":return{loading:!0,messages:[]};case"FETCH_MESSAGES_SUCCESS":return{loading:!1,messages:t.payload};case"FETCH_MESSAGES_FAILURE":return{loading:!1,messages:Object(te.a)(e.messages)};case"MESSAGE_UPDATE":var a=t.payload,n=a.id,r=a.updated,c=a.message,o=a.sort,s=void 0===o||o,i=e.messages.findIndex((function(e){return e.id===n})),m=Object(te.a)(e.messages);if(s){var u=c.name,d=c.text,f=c.avatarUrl;i>=0&&(u=m[i].name,m=m.filter((function(e){return e.id!==n}))),m.unshift(be(u,d,n,f,r))}else i>=0&&(m[i].updated=r);return Object(l.a)({},e,{messages:m});case"MESSAGES_LIST_UPDATE":return Object(l.a)({},e,{messages:t.payload});default:return e}},Ce={messages:[],loading:!1,inChat:!1,chatId:null,companion:{}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHAT":return Object(l.a)({},e,{loading:!0});case"FETCH_CHAT_SUCCESS":return Object(l.a)({},e,{messages:t.payload.messages,companion:Object(l.a)({},t.payload.companion),loading:!1});case"FETCH_CHAT_FAILURE":return Object(l.a)({},e,{loading:!1});case"CHAT_STATUS_UPDATE":var a=t.payload,n=a.inChat,r=void 0!==n&&n,c=a.chatId,o=void 0===c?null:c;return Object(l.a)({},e,{inChat:r,chatId:o});case"CHAT_MESSAGE_ADD":return Object(l.a)({},e,{messages:[].concat(Object(te.a)(e.messages),[t.payload])});default:return e}},ye=Object(q.c)({user:ge,messages:Ne,chat:Oe}),Se=a(72),je=a(73);a(21),a(40),new Ee;var we=Object(je.a)(),ke=(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(q.e)(ye,Object(q.d)(Object(q.a)(Se.a,we,(function(){return function(e){return function(t){return console.log(t),e(t)}}}))))),Te=new Ee,Ue=localStorage.getItem("userData");function Ae(){o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:ke},r.a.createElement(w,{value:Te},r.a.createElement(M.Provider,{value:{publicPath:"/public/images/"}},r.a.createElement(i.a,null,r.a.createElement(fe,null)))))),document.getElementById("root"))}Te.setToken(Ue),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SOCKET_PORT:"5000"}),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SOCKET_PORT:"5000"}).CLIENT_SOCKET_PORT),_.on("connect",(function(){Ue?ke.dispatch(h(Te,Ue)()).then((function(e){Ae();var t=ke.getState().user.id;_.emit("connected",{id:t})})):Ae()})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){e.exports=a(133)},84:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.d4058a22.chunk.js.map